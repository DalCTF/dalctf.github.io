---
import Banner from "../components/Banner.astro";
import Hero from "../components/Hero.astro";
import LatestCompetitions from "../components/LatestCompetitions.astro";
import LatestWriteups from "../components/LatestWriteups.astro";
import Spacer from "../components/Spacer.astro";
import Layout from "../layouts/Layout.astro";
import { WeeklyProblems } from "../loaders/WeeklyProblem";

// Populate weekly problems cache during server-side render.
// This is necessary even if weekly problems are not presented, 
// as the cache will then remain empty when the weekly problems page is accessed.
try {
	await WeeklyProblems.shared.list();
} catch (e) {
	console.error("Error preloading weekly problems");
}
---

<Layout title="Status 418" description="">
	<!-- Hero -->
	<Hero title="Status 418 is Dalhousie University's CTF team" />

	<!-- Banner -->
	<Banner
		icon="discord"
		text="Join us on Discord!"
		url="https://discord.gg/4vEJJF6CQg"
	/>
	<Spacer />

	<!-- Writeups -->
	<LatestWriteups />
	<Spacer />

	<!-- Rankings -->
	<LatestCompetitions />
	<Spacer />
</Layout>
